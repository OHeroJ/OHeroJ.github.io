<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="oheroj iOS python" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="OHeroJ">
<meta property="og:url" content="http://www.oheroj.com/index.html">
<meta property="og:site_name" content="OHeroJ">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OHeroJ">
<meta name="twitter:description">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 6263237426282497000,
      author: '博主'
    }
  };
</script>

  <title> OHeroJ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">OHeroJ</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">浮生流年</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/04/cocoapods高级篇/" itemprop="url">
                  cocoapods高级篇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-09-04T13:16:02+08:00" content="2016-09-04">
              2016-09-04
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/04/cocoapods高级篇/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/04/cocoapods高级篇/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>之前有篇文章是讲cocoapods 初级篇的，但是随着项目的积累，发现基础篇的知识貌似还不是很能满足一些特定的情况。</p>
</blockquote>
<h2 id="pod的引入"><a href="#pod的引入" class="headerlink" title="pod的引入"></a><code>pod</code>的引入</h2><ol>
<li>一般的情况我们会用 <code>pod &#39;AFNetworking&#39;,&#39;~&gt; 3.1&#39;</code>， 这些指定<code>source</code>就可以安装到指定<code>tag</code>的版本的代码</li>
<li><p>使用指定git不同版本的代码</p>
<ul>
<li><p>使用git的<code>master</code>分支上的代码</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'AFNetworking'</span>, <span class="symbol">:git</span> =&gt; <span class="string">'https://github.com/AFNetworking/AFNetworking.git'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用其他分支的repo:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'AFNetowring'</span>, <span class="symbol">:git</span> =&gt; <span class="string">'https://github.com/AFNetworking/AFNetworking.git'</span>, <span class="symbol">:branch</span> =&gt; <span class="string">'2.x'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用指定tag的代码</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod <span class="string">'AFNetowring'</span>, <span class="symbol">:git</span> =&gt; <span class="string">'https://github.com/AFNetworking/AFNetworking.git'</span>, <span class="symbol">:tag</span> =&gt; <span class="string">'3.1'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用某个指定的 commit的代码：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'AFNetowring'</span>, <span class="symbol">:git</span> =&gt; <span class="string">'https://github.com/AFNetworking/AFNetworking.git'</span>, <span class="symbol">:commit</span> =&gt; <span class="string">'f51f0b8'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>用spec repo 之外的podspec, 可自己指定 podspec</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod&apos;JSONKit&apos;, :podspec=&gt;&apos;https://example.com/JSONKit.podspec&apos;</span><br></pre></td></tr></table></figure>
<ol>
<li>可以指定安装特定的<code>subspec</code>， 如 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &apos;QueryKit/Attribute&apos;</span><br></pre></td></tr></table></figure>
<p>或者指定部分的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &apos;QueryKit&apos;,:subspecs=&gt;[&apos;Attribute&apos;,&apos;QuerySet&apos;]</span><br></pre></td></tr></table></figure>
<h2 id="资源文件"><a href="#资源文件" class="headerlink" title="资源文件"></a>资源文件</h2><h2 id="文件夹映射"><a href="#文件夹映射" class="headerlink" title="文件夹映射"></a>文件夹映射</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/31/设计/" itemprop="url">
                  设计
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-31T21:54:58+08:00" content="2016-08-31">
              2016-08-31
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/31/设计/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/31/设计/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在做<code>iOS</code>的组件化功能， 造轮子。有些方面对我在写代码影响很大的方面今天在这里记录一下：</p>
<h3 id="OO原则"><a href="#OO原则" class="headerlink" title="OO原则"></a>OO原则</h3><ol>
<li>针对接口编程，不针对实现编程</li>
<li>多用组合，少用继承</li>
<li>松耦合设计</li>
<li>封装变化</li>
<li>依赖抽象，不依赖具体类</li>
<li>对扩展开放，对修改关闭</li>
<li>封装变化</li>
</ol>
<h3 id="常用模式"><a href="#常用模式" class="headerlink" title="常用模式"></a>常用模式</h3><ol>
<li>代理</li>
<li>适配器</li>
<li>MVC</li>
<li>组合模式</li>
<li>观察者模式</li>
<li>装饰器</li>
</ol>
<h3 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h3><h4 id="适配器-代理-外观的区别？"><a href="#适配器-代理-外观的区别？" class="headerlink" title="适配器|代理|外观的区别？"></a>适配器|代理|外观的区别？</h4><ul>
<li>原理上：<ul>
<li>代理：为其他对象提供一种代理一控制对这个对象的访问。起到一个中介的目的</li>
<li>适配器：包装样式，一个适配器使得因接口不兼容而不能再一起工作的类工作在一起，讲一个类的接口转换成客户希望的另外一个接口</li>
<li>外观：为子系统中的一组接口提供一个一致的界面，此模式定义了一个高层接口，这个接口使得这一子系统更加容易使用</li>
</ul>
</li>
<li><p>设计模式总是通过增加层来进行解耦，提高扩展性，从抽象维度去看一个模式的内涵。<br>适配器因为兼容问题，代理的作用是不把实现暴露。</p>
</li>
<li><p>代理模式，代理者保存一个被代理的一个对象；适配器模式，保存了一个被适配的对象；而外观模式，就保存了各个子系统对象，然后根据实际逻辑组合。</p>
</li>
</ul>
<h5 id="外观模式（Facade）举例："><a href="#外观模式（Facade）举例：" class="headerlink" title="外观模式（Facade）举例："></a>外观模式（Facade）举例：</h5><p>vc 请求数据： 有网的时候请求网络，无网的时候请求本地</p>
<p>DataAlbumManager是vc操作的对象，他持有NetAlbumDataManager，DataAlbumManager</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (id)init</span><br><span class="line">&#123;</span><br><span class="line">    self = [super init];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        persistencyManager = [[DatabaseAlbumDataManager alloc] init];</span><br><span class="line">        httpClient = [[NetAlbumDataManager alloc] init];</span><br><span class="line">        isOnline = NO;</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在实现 DataAlbumManager 的方法的时候：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (NSArray*)getAlbums</span><br><span class="line">&#123;</span><br><span class="line">    return [persistencyManager getAlbums];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)addAlbum:(Album*)album atIndex:(int)index</span><br><span class="line">&#123;</span><br><span class="line">    [persistencyManager addAlbum:album atIndex:index];</span><br><span class="line">    if (isOnline)</span><br><span class="line">    &#123;</span><br><span class="line">        [httpClient postRequest:@&quot;/api/addAlbum&quot; body:[album description]];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)deleteAlbumAtIndex:(int)index</span><br><span class="line">&#123;</span><br><span class="line">    [persistencyManager deleteAlbumAtIndex:index];</span><br><span class="line">    if (isOnline)</span><br><span class="line">    &#123;</span><br><span class="line">        [httpClient postRequest:@&quot;/api/deleteAlbum&quot; body:[@(index) description]];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>DataAlbumManager这个类中还可以做很多防御性的操作</p>
</blockquote>
<h4 id="装饰器？"><a href="#装饰器？" class="headerlink" title="装饰器？"></a>装饰器？</h4><p>装饰器模式可以在不修改代码的情况下灵活的为一对象添加行为和职责。当你要修改一个被其它类包含的类的行为时，它可以代替子类化方法。</p>
<p>在OC中实现的模式： 分类(Category)和委托(Delegation)</p>
<h4 id="策略模式？"><a href="#策略模式？" class="headerlink" title="策略模式？"></a>策略模式？</h4><p>定义一组算法，将每个算法都封装起来，并且是它们之间可以互换。</p>
<ul>
<li>策略模式优点<ul>
<li>算法可以自由切换。</li>
<li>避免使用多重条件判断。</li>
<li>扩展性良好。</li>
</ul>
</li>
<li>策略模式缺点<ul>
<li>策略类数量增多 每一个策略都是一个类，复用的可能性很小，类数量增多。</li>
<li>所有的策略类都需要对外暴露 上层模块必须知道有哪些策略，然后才能决定使用哪一个策略，这与<code>迪米特法则</code>是相违背的。</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">@protocol TransportStrategy &lt;NSObject&gt;</span><br><span class="line">- (void)travelling;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface Car : NSObject&lt;TransportStrategy&gt;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation Car</span><br><span class="line"></span><br><span class="line">- (void)travelling</span><br><span class="line">&#123;</span><br><span class="line">    NSLog(@&quot;travelling by car.&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface Bicycle : NSObject&lt;TransportStrategy&gt;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation Bicycle</span><br><span class="line"></span><br><span class="line">- (void)travelling</span><br><span class="line">&#123;</span><br><span class="line">    NSLog(@&quot;travelling by bicycle.&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@interface Train : NSObject&lt;TransportStrategy&gt;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation Train</span><br><span class="line"></span><br><span class="line">- (void)travelling</span><br><span class="line">&#123;</span><br><span class="line">    NSLog(@&quot;travelling by train.&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">/// =================</span><br><span class="line"></span><br><span class="line">@interface Person : NSObject</span><br><span class="line"></span><br><span class="line">- (void)travel:(id&lt;TransportStrategy&gt;)transport;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation Person</span><br><span class="line"></span><br><span class="line">- (void)travel:(id&lt;TransportStrategy&gt;)transport</span><br><span class="line">&#123;</span><br><span class="line">    [transport travelling];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">////========= 使用 ============</span><br><span class="line">int main(int argc, const char * argv[])</span><br><span class="line">&#123;</span><br><span class="line">    @autoreleasepool &#123;</span><br><span class="line">        Car *car = [[Car alloc]init];</span><br><span class="line">        Bicycle *bicycle = [[Bicycle alloc]init];</span><br><span class="line">        Train *train = [[Train alloc]init];</span><br><span class="line">        Person *person = [[Person alloc]init];</span><br><span class="line"></span><br><span class="line">        [person travel:car];</span><br><span class="line">        [person travel:bicycle];</span><br><span class="line">        [person travel:train];</span><br><span class="line">    &#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/24/iOS开发技巧/" itemprop="url">
                  iOS开发技巧
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-24T08:42:11+08:00" content="2016-08-24">
              2016-08-24
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/24/iOS开发技巧/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/24/iOS开发技巧/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="XCode快捷键"><a href="#XCode快捷键" class="headerlink" title="XCode快捷键"></a>XCode快捷键</h2><ol>
<li><code>cmd + shift + j</code> : 定位当前代码文件所在的目录中的位置</li>
<li><code>cmd + shift + o</code> : 寻找类对应的代码文件</li>
<li><code>cmd + shift + f</code> : 从全局搜索全局文件</li>
<li><code>cmd + \</code> : 取消断点  或者打断点</li>
<li><code>cmd + alt +  &lt;-</code> : 折叠代码</li>
<li><code>cmd + alt +  -&gt;</code> : 展开代码</li>
</ol>
<h2 id="封装库的代码细节处理"><a href="#封装库的代码细节处理" class="headerlink" title="封装库的代码细节处理"></a>封装库的代码细节处理</h2><ol>
<li><p>忽略编译警告</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#pragma clang diagnostic push</span><br><span class="line">#pragma clang diagnostic ignored &quot;-Warc-retain-cycles&quot;</span><br><span class="line">    self.completionBlock = ^ &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;;</span><br><span class="line">#pragma clang diagnostic pop</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="http://ios.jobbole.com/85019/" target="_blank" rel="external">剖析@weakify 和 @strongify：</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#define weakify(...)</span><br><span class="line">    rac_keywordify</span><br><span class="line">    metamacro_foreach_cxt(rac_weakify_,, __weak, __VA_ARGS__)</span><br><span class="line"> </span><br><span class="line">#define strongify(...)</span><br><span class="line">    rac_keywordify</span><br><span class="line">    _Pragma(&quot;clang diagnostic push&quot;)</span><br><span class="line">    _Pragma(&quot;clang diagnostic ignored &quot;-Wshadow&quot;&quot;)</span><br><span class="line">    metamacro_foreach(rac_strongify_,, __VA_ARGS__)</span><br><span class="line">    _Pragma(&quot;clang diagnostic pop&quot;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>断言的使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NSParameterAssert(playButtonImage != nil);</span><br><span class="line">NSParameterAssert(pauseButtonImage != nil);</span><br><span class="line">NSParameterAssert(labelFont != nil);</span><br><span class="line">NSParameterAssert(backgroundColor != nil);</span><br><span class="line">NSParameterAssert(tintColor != nil);</span><br><span class="line">NSParameterAssert(audioCategory != nil);</span><br></pre></td></tr></table></figure>
</li>
<li><p>通知的移除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (void)dealloc</span><br><span class="line">&#123;</span><br><span class="line">    [[NSNotificationCenter defaultCenter] removeObserver:self];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="xocde-字体设置："><a href="#xocde-字体设置：" class="headerlink" title="xocde 字体设置："></a>xocde 字体设置：</h2><p>Xcode我喜欢的字体是 Courier New 16号字体</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/23/iOS之AOP/" itemprop="url">
                  iOS之AOP
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-23T22:37:39+08:00" content="2016-08-23">
              2016-08-23
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/23/iOS之AOP/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/23/iOS之AOP/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>在iOS中实现AOP的核心技术是Runtime,使用Runtime的Method Swizzling黑魔法，我们可以移花接木，在运行时将方法的具体实现添油加醋、偷梁换柱</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- (void)swizzleMethod:(SEL)origSelector withMethod:(SEL)newSelector</span><br><span class="line">&#123;</span><br><span class="line">    Class class = [self class];</span><br><span class="line"></span><br><span class="line">    Method originalMethod = class_getInstanceMethod(class, origSelector);</span><br><span class="line">    Method swizzledMethod = class_getInstanceMethod(class, newSelector);</span><br><span class="line"></span><br><span class="line">    BOOL didAddMethod = class_addMethod(class,</span><br><span class="line">                                        origSelector,</span><br><span class="line">                                        method_getImplementation(swizzledMethod),</span><br><span class="line">                                        method_getTypeEncoding(swizzledMethod));</span><br><span class="line">    if (didAddMethod) &#123;</span><br><span class="line">        class_replaceMethod(class,</span><br><span class="line">                            newSelector,</span><br><span class="line">                            method_getImplementation(originalMethod),</span><br><span class="line">                            method_getTypeEncoding(originalMethod));</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        method_exchangeImplementations(originalMethod, swizzledMethod);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="业务埋点、日志打印分离"><a href="#业务埋点、日志打印分离" class="headerlink" title="业务埋点、日志打印分离"></a>业务埋点、日志打印分离</h3><p><code>Aspects</code> 一个基于Objective-c的AOP开发框架,只提供两个API:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+ (id)aspect_hookSelector:(SEL)selector</span><br><span class="line">                         withOptions:(AspectOptions)options</span><br><span class="line">                      usingBlock:(id)block</span><br><span class="line">                           error:(NSError **)error;</span><br><span class="line">- (id)aspect_hookSelector:(SEL)selector</span><br><span class="line">                     withOptions:(AspectOptions)options</span><br><span class="line">                      usingBlock:(id)block</span><br><span class="line">                           error:(NSError **)error;</span><br></pre></td></tr></table></figure></p>
<p>一般对于这种统计的埋点 我们会配置相关文件，然后读取相关文件的信息，解析 <code>Class</code> 和 <code>selector</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">NSDictionary *analyticsConfiguration()</span><br><span class="line">&#123;</span><br><span class="line">    return @&#123;</span><br><span class="line">             @&quot;trackedScreens&quot; : @[    // 页面统计</span><br><span class="line">                     @&#123;</span><br><span class="line">                         @&quot;class&quot; : @&quot;ZOCMainViewController&quot;,</span><br><span class="line">                         @&quot;label&quot; : @&quot;Main screen&quot;</span><br><span class="line">                         &#125;</span><br><span class="line">                     ],</span><br><span class="line">             @&quot;trackedEvents&quot; : @[  // 交互事件统计</span><br><span class="line">                     @&#123;</span><br><span class="line">                         @&quot;class&quot; : @&quot;ZOCMainViewController&quot;,</span><br><span class="line">                         @&quot;selector&quot; : @&quot;loginViewFetchedUserInfo:user:&quot;,</span><br><span class="line">                         @&quot;label&quot; : @&quot;Login with Facebook&quot;</span><br><span class="line">                         &#125;,</span><br><span class="line">                     @&#123;</span><br><span class="line">                         @&quot;class&quot; : @&quot;ZOCMainViewController&quot;,</span><br><span class="line">                         @&quot;selector&quot; : @&quot;loginViewShowingLoggedOutUser:&quot;,</span><br><span class="line">                         @&quot;label&quot; : @&quot;Logout with Facebook&quot;</span><br><span class="line">                         &#125;,</span><br><span class="line">                     @&#123;</span><br><span class="line">                         @&quot;class&quot; : @&quot;ZOCMainViewController&quot;,</span><br><span class="line">                         @&quot;selector&quot; : @&quot;loginView:handleError:&quot;,</span><br><span class="line">                         @&quot;label&quot; : @&quot;Login error with Facebook&quot;</span><br><span class="line">                         &#125;,</span><br><span class="line">                     @&#123;</span><br><span class="line">                         @&quot;class&quot; : @&quot;ZOCMainViewController&quot;,</span><br><span class="line">                         @&quot;selector&quot; : @&quot;shareButtonPressed:&quot;,</span><br><span class="line">                         @&quot;label&quot; : @&quot;Share button&quot;</span><br><span class="line">                         &#125;</span><br><span class="line">                     ]</span><br><span class="line">             &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后就是 进行 method_swizzing,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">// .h</span><br><span class="line">@interface YTViewControllerIntercepter : NSObject</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// .m</span><br><span class="line">@implementation YTViewControllerIntercepter</span><br><span class="line"></span><br><span class="line">+ (void)load &#123;</span><br><span class="line">    [super load];</span><br><span class="line">    [YTViewControllerIntercepter shareInstance];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (instancetype)shareInstance &#123;</span><br><span class="line">    static dispatch_once_t onceToken;</span><br><span class="line">    static YTViewControllerIntercepter *sharedInstance;</span><br><span class="line">    dispatch_once(&amp;onceToken, ^&#123;</span><br><span class="line">        sharedInstance = [[YTViewControllerIntercepter alloc] init];</span><br><span class="line">    &#125;);</span><br><span class="line">    return sharedInstance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (instancetype)init &#123;</span><br><span class="line">    if (self = [super init]) &#123;</span><br><span class="line"></span><br><span class="line">         /* 在这里做好方法拦截 */</span><br><span class="line">        [self setupWithConfiguration:analyticsConfiguration()];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)setupWithConfiguration:(NSDictionary *)configuration &#123;</span><br><span class="line"></span><br><span class="line">    for (NSDictionary *trackedScreen in configuration[@&quot;trackedScreens&quot;]) &#123;</span><br><span class="line">        Class clazz = NSClassFromString(trackedScreen[@&quot;class&quot;]);</span><br><span class="line"></span><br><span class="line">        [clazz aspect_hookSelector:@selector(viewWillAppear:) withOptions:AspectPositionAfter usingBlock:^(id&lt;AspectInfo&gt; aspectInfo) &#123;</span><br><span class="line">            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</span><br><span class="line">                NSString *viewName = trackedScreen[@&quot;label&quot;];</span><br><span class="line">//                [tracker trackScreenHitWithName:viewName];</span><br><span class="line"></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">        &#125;error:nil];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // events tracking</span><br><span class="line">    for (NSDictionary *trackedEvents in configuration[@&quot;trackedEvents&quot;]) &#123;</span><br><span class="line">        Class clazz = NSClassFromString(trackedEvents[@&quot;class&quot;]);</span><br><span class="line">        SEL selektor = NSSelectorFromString(trackedEvents[@&quot;selector&quot;]);</span><br><span class="line"></span><br><span class="line">        [clazz aspect_hookSelector:selektor</span><br><span class="line">                       withOptions:AspectPositionAfter</span><br><span class="line">                        usingBlock:^(id&lt;AspectInfo&gt; aspectInfo) &#123;</span><br><span class="line">                            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),</span><br><span class="line">                                           ^&#123;</span><br><span class="line">//                                               UserActivityButtonPressedEvent *buttonPressEvent =</span><br><span class="line">//                                               [UserActivityButtonPressedEvent</span><br><span class="line">//                                                eventWithLabel:trackedEvents[@&quot;label&quot;]];</span><br><span class="line">//                                               [tracker trackEvent:buttonPressEvent];</span><br><span class="line">                                           &#125;);</span><br><span class="line">                        &#125;</span><br><span class="line">                             error:nil];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面有个提示，摘抄自<a href="http://nshipster.com/method-swizzling/" target="_blank" rel="external">nshsipster</a></p>
<blockquote>
<p> Swizzling should always be done in +load ?<br>+load is sent when the class is initially loaded, while +initialize is called just before the application calls its first method on that class or an instance of that class. Both are optional, and are executed only if the method is implemented.<br>Because method swizzling affects global state, it is important to minimize the possibility of race conditions. +load is guaranteed to be loaded during class initialization, which provides a modicum of consistency for changing system-wide behavior. By contrast, +initialize provides no such guarantee of when it will be executed—in fact, it may never be called, if that class is never messaged directly by the app.</p>
</blockquote>
<h3 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h3><ol>
<li>解耦</li>
</ol>
<h3 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h3><ol>
<li>变更方法的时候，可能会忽略修改配置文件</li>
<li>这个方法被重构了。或者新加的方法忘了加统计了</li>
</ol>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><ol>
<li><a href="http://nshipster.com/method-swizzling/" target="_blank" rel="external">Method Swizzling</a></li>
<li><a href="http://my.oschina.net/leejun2005/blog/504732" target="_blank" rel="external">iOS 统计打点那些事</a></li>
<li><a href="https://github.com/oa414/objc-zen-book-cn#%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B" target="_blank" rel="external">禅与 Objective-C 编程艺术</a></li>
<li><a href="http://ios.jobbole.com/86612/?utm_source=top.caibaojian.com/112246" target="_blank" rel="external">漫谈iOS AOP编程之路</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/21/React-Native入门/" itemprop="url">
                  React-Native入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-21T18:51:28+08:00" content="2016-08-21">
              2016-08-21
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/21/React-Native入门/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/21/React-Native入门/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="为什么学习React-Native"><a href="#为什么学习React-Native" class="headerlink" title="为什么学习React-Native?"></a>为什么学习React-Native?</h2><h3 id="动态配置？"><a href="#动态配置？" class="headerlink" title="动态配置？"></a>动态配置？</h3><p>从 Server 获取配置 –&gt; 解析 –&gt; 执行 native 代码：</p>
<ol>
<li>通过请求获取JSON格式的配置文件</li>
<li>配置文件中标记了每个元素的属性，比如位置， 颜色， 图片URL等</li>
<li>解析完JSON后， 我们调用Object-C的代码，完成UI控件的渲染。</li>
</ol>
<p>此方法其实就是 移动端 和 服务器端 约定的一套协议，但是协议内容 严重依赖于 应用内要展示的内容， 不利于扩展。<br>提供的是一些配置信息，而不是很方便的提供逻辑信息。</p>
<p>我们只是在解析字符串， 它完全不具备运行和调试的能力。</p>
<blockquote>
<p>React 是一套可以用简洁的语法高效绘制DOM的框架</p>
</blockquote>
<p>当然，React 并不是前端开发的全部。从之前的描述也能看出，它专注于 UI 部分，对应到 MVC 结构中就是 View 层。要想实现完整的 MVC 架构，还需要 Model 和 Controller 的结构。在前端开发时，我们可以采用 Flux 和 Redux 架构，它们并非框架(Library)，而是和 MVC 一样都是一种架构设计(Architecture)。</p>
<p>React Native 与 Hybrid 完全没有关系，它只不过是以 JavaScript 的形式告诉 Objective-C 该执行什么代码</p>
<h3 id="JavaScript-调用-Objective-C"><a href="#JavaScript-调用-Objective-C" class="headerlink" title="JavaScript 调用 Objective-C"></a>JavaScript 调用 Objective-C</h3><h4 id="js-怎么知道-oc-有哪些方法可以调用？"><a href="#js-怎么知道-oc-有哪些方法可以调用？" class="headerlink" title="js 怎么知道 oc 有哪些方法可以调用？"></a>js 怎么知道 oc 有哪些方法可以调用？</h4><h4 id="闭包与回调"><a href="#闭包与回调" class="headerlink" title="闭包与回调"></a>闭包与回调</h4>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/10/优雅处理-bad-enum-configurations/" itemprop="url">
                  优雅处理 bad enum configurations
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-10T23:10:48+08:00" content="2016-08-10">
              2016-08-10
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/10/优雅处理-bad-enum-configurations/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/10/优雅处理-bad-enum-configurations/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Using-an-enum-for-configuration"><a href="#Using-an-enum-for-configuration" class="headerlink" title="Using an enum for configuration"></a>Using an enum for configuration</h3><p>上例子：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CellStyle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> login</span><br><span class="line">    <span class="keyword">case</span> profile</span><br><span class="line">    <span class="keyword">case</span> settings</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommonTableCell</span>: <span class="title">UITableViewCell</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> style: <span class="type">CellStyle</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            configureStyle()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">configureStyle</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> cellStyle &#123;</span><br><span class="line">        <span class="keyword">case</span> .login:</span><br><span class="line">            <span class="comment">// configure style for login view</span></span><br><span class="line">            textLabel?.textColor = .red()</span><br><span class="line">            textLabel?.font = .preferredFont(forTextStyle: <span class="type">UIFontTextStyleBody</span>)</span><br><span class="line"></span><br><span class="line">            detailTextLabel?.textColor = .blue()</span><br><span class="line">            detailTextLabel?.font = .preferredFont(forTextStyle: <span class="type">UIFontTextStyleTitle3</span>)</span><br><span class="line"></span><br><span class="line">            accessoryView = <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>(named: <span class="string">"chevron"</span>))</span><br><span class="line">        <span class="keyword">case</span> .settings:</span><br><span class="line">            <span class="comment">// configure style for settings view</span></span><br><span class="line">            textLabel?.textColor = .purple()</span><br><span class="line">            textLabel?.font = .preferredFont(forTextStyle: <span class="type">UIFontTextStyleTitle1</span>)</span><br><span class="line"></span><br><span class="line">            detailTextLabel?.textColor = .green()</span><br><span class="line">            detailTextLabel?.font = .preferredFont(forTextStyle: <span class="type">UIFontTextStyleCaption1</span>)</span><br><span class="line"></span><br><span class="line">            accessoryView = <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>(named: <span class="string">"checkmark"</span>))</span><br><span class="line">         <span class="keyword">case</span> .profile:</span><br><span class="line">            <span class="comment">// configure style for profile view</span></span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SettingsViewController</span>: <span class="title">UITableViewController</span> </span>&#123;</span><br><span class="line">   <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">tableView</span><span class="params">(<span class="number">_</span> tableView: UITableView, cellForRowAt indexPath: IndexPath)</span></span> -&gt; <span class="type">UITableViewCell</span> &#123;</span><br><span class="line">      <span class="comment">// create and configure cell</span></span><br><span class="line">      cell.style = .settings</span><br><span class="line">      <span class="keyword">return</span> cell</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>This is so bad!😢</strong></p>
<h3 id="Why-enum-configurations-are-bad"><a href="#Why-enum-configurations-are-bad" class="headerlink" title="Why enum configurations are bad"></a>Why enum configurations are bad</h3><p>有些人会觉得这个模式很ok哇， “is flexible”，如果你有一个新的CellStyle, 你只需要添加一个<code>case</code>,然后在switch添加一处处理。‘set any style you want’。</p>
<p>但是如果这个cell是一个library，你就没有办法添加新的 case, 这个时候就无法 添加自己想要的cellstyle了，或者你也许可以提PR.那么对于使用这个lib的人来说，这个库设计的是不灵活的。</p>
<p>还有就是这个 判断case 分支越多，代码就越难看。</p>
<h4 id="如何改进这种设计"><a href="#如何改进这种设计" class="headerlink" title="如何改进这种设计"></a>如何改进这种设计</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CellStyle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> labelColor: <span class="type">UIColor</span></span><br><span class="line">    <span class="keyword">let</span> labelFont: <span class="type">UIFont</span></span><br><span class="line">    <span class="keyword">let</span> detailColor: <span class="type">UIColor</span></span><br><span class="line">    <span class="keyword">let</span> detailFont: <span class="type">UIFont</span></span><br><span class="line">    <span class="keyword">let</span> accessory: <span class="type">UIImage</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">init</span>(labelColor: <span class="type">UIColor</span> = .black(),</span><br><span class="line">         labelFont: <span class="type">UIFont</span> = .preferredFont(forTextStyle: <span class="type">UIFontTextStyleTitle1</span>),</span><br><span class="line">         detailColor: <span class="type">UIColor</span> = .lightGray(),</span><br><span class="line">         detailFont: <span class="type">UIFont</span> = .preferredFont(forTextStyle: <span class="type">UIFontTextStyleCaption1</span>),</span><br><span class="line">         accessory: <span class="type">UIImage</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.labelColor = labelColor</span><br><span class="line">        <span class="keyword">self</span>.labelFont = labelFont</span><br><span class="line">        <span class="keyword">self</span>.detailColor = detailColor</span><br><span class="line">        <span class="keyword">self</span>.detailFont = detailFont</span><br><span class="line">        <span class="keyword">self</span>.accessory = accessory</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">CellStyle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> settings: <span class="type">CellStyle</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">CellStyle</span>(labelColor: .purple(),</span><br><span class="line">                         labelFont: .preferredFont(forTextStyle: <span class="type">UIFontTextStyleTitle1</span>),</span><br><span class="line">                         detailColor: .green(),</span><br><span class="line">                         detailFont: .preferredFont(forTextStyle: <span class="type">UIFontTextStyleCaption1</span>),</span><br><span class="line">                         accessory: <span class="type">UIImage</span>(named: <span class="string">"checkmark"</span>)!)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">CellStyle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> custom: <span class="type">CellStyle</span> &#123;</span><br><span class="line">        <span class="comment">// uses default fonts</span></span><br><span class="line">        <span class="keyword">return</span> <span class="type">CellStyle</span>(labelColor: .blue(),</span><br><span class="line">                         detailColor: .red(),</span><br><span class="line">                         accessory: <span class="type">UIImage</span>(named: <span class="string">"action"</span>)!)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommonTableCell</span>: <span class="title">UITableViewCell</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">apply</span><span class="params">(style: CellStyle)</span></span> &#123;</span><br><span class="line">        textLabel?.textColor = style.labelColor</span><br><span class="line">        textLabel?.font = style.labelFont</span><br><span class="line"></span><br><span class="line">        detailTextLabel?.textColor = style.detailColor</span><br><span class="line">        detailTextLabel?.font = style.detailFont</span><br><span class="line"></span><br><span class="line">        accessoryView = <span class="type">UIImageView</span>(image: style.accessory)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// usage:</span></span><br><span class="line">cell.apply(style: .settings)</span><br></pre></td></tr></table></figure>
<p>对扩展开放，对修改关闭</p>
<blockquote>
<p>Software entities should be open for extension, but closed for modification. That is, such an entity can allow its behavior to be extended without modifying its source code.</p>
</blockquote>
<div text-align="center"><br><img src="http://obp26pczx.bkt.clouddn.com/cell-model.png" width="80%"><br></div>


<h3 id="扩展阅读："><a href="#扩展阅读：" class="headerlink" title="扩展阅读："></a>扩展阅读：</h3><ul>
<li><a href="http://www.jessesquires.com/enums-as-configs/?utm_campaign=This%2BWeek%2Bin%2BSwift&amp;utm_medium=web&amp;utm_source=This_Week_in_Swift_98" target="_blank" rel="external">Enums as configuration: the anti-pattern</a></li>
<li><a href="https://realm.io/cn/news/tryswift-daniel-steinberg-blending-cultures/" target="_blank" rel="external">文化碰撞：函数式、面向协议、面向对象编程的最佳实践</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/07/私有cocoapods的创建和维护s/" itemprop="url">
                  私有cocoapods的创建和维护s
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-08-07T21:53:39+08:00" content="2016-08-07">
              2016-08-07
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/07/私有cocoapods的创建和维护s/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/07/私有cocoapods的创建和维护s/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="使用cocoapods创建私有podspec"><a href="#使用cocoapods创建私有podspec" class="headerlink" title="使用cocoapods创建私有podspec"></a>使用cocoapods创建私有<code>podspec</code></h3><h4 id="创建私有podspec的步骤"><a href="#创建私有podspec的步骤" class="headerlink" title="创建私有podspec的步骤"></a>创建私有<code>podspec</code>的步骤</h4><h5 id="1-创建并设置一个私有的Spec-Repo"><a href="#1-创建并设置一个私有的Spec-Repo" class="headerlink" title="1. 创建并设置一个私有的Spec Repo"></a>1. 创建并设置一个私有的<code>Spec Repo</code></h5><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo add MySpecs <span class="symbol">https:</span>/<span class="regexp">/gitlab.com/oheroj</span><span class="regexp">/spects.git</span></span><br></pre></td></tr></table></figure>
<p>验证是否成功的话，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.cocoapods/repos/MySpecs</span><br></pre></td></tr></table></figure></p>
<p><img src="/images/pod-file01.png" alt="eg"></p>
<h5 id="2-创建Pod所需要的项目工程文件，-并且有可访问的项目版本控制地址"><a href="#2-创建Pod所需要的项目工程文件，-并且有可访问的项目版本控制地址" class="headerlink" title="2. 创建Pod所需要的项目工程文件， 并且有可访问的项目版本控制地址"></a>2. 创建Pod所需要的项目工程文件， 并且有可访问的项目版本控制地址</h5><h5 id="3-创建Pod所对应的podspec文件"><a href="#3-创建Pod所对应的podspec文件" class="headerlink" title="3. 创建Pod所对应的podspec文件"></a>3. 创建Pod所对应的<code>podspec</code>文件</h5><p>一般情况下2，3 两步骤是在一起的， 使用<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod lib create RoundButton</span><br></pre></td></tr></table></figure></p>
<p><img src="/images/pod-file02.png" alt="pod lib create eg"></p>
<p><img src="/images/pod-file03.png" alt="pod lib create xocde eg"></p>
<p>接下来就是在pod文件夹中添加文件和资源， 并配置<code>podspec</code>文件。</p>
<p><img src="/images/pod-file04.png" alt="pod lib create xcode add"></p>
<p>将代码推送到远端：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit <span class="_">-s</span> -m <span class="string">"First Commit of Lib"</span></span><br></pre></td></tr></table></figure>
<p>这个时候你在gitlab上创建个项目：<br><img src="/images/pod-file05.png" alt="pod lib create xcode gitlab"></p>
<p>将本地代码库与远程代码库关联<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@gitlab.com:oheroj/RoundButton.git <span class="comment">#添加远端仓库</span></span><br><span class="line">git push origin master <span class="comment"># 提交到远端仓库</span></span><br></pre></td></tr></table></figure></p>
<p>这里我们也会遇到一个问题就是 git 提交人的信息有问题，默认提交者为你设置的全局的git的ueser， 所以这个时候就得改名字了， 比如我这边要改为 oheroj , 然后邮箱改为gmail邮箱。<br>有这么一段脚本可以 <a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E9%87%8D%E5%86%99%E5%8E%86%E5%8F%B2" target="_blank" rel="external">参考执行</a>：</p>
<p>有这么个脚本  change.sh, 里面的内容是：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">git filter-branch --env-filter <span class="string">'</span><br><span class="line"></span><br><span class="line">OLD_EMAIL="1814345797@qq.com"</span><br><span class="line">CORRECT_NAME="OHeroJ"</span><br><span class="line">CORRECT_EMAIL="oheroj@gmail.com"</span><br><span class="line"></span><br><span class="line">if [ "$GIT_COMMITTER_EMAIL" = "$OLD_EMAIL" ]</span><br><span class="line">then</span><br><span class="line">    export GIT_COMMITTER_NAME="$CORRECT_NAME"</span><br><span class="line">    export GIT_COMMITTER_EMAIL="$CORRECT_EMAIL"</span><br><span class="line">fi</span><br><span class="line">if [ "$GIT_AUTHOR_EMAIL" = "$OLD_EMAIL" ]</span><br><span class="line">then</span><br><span class="line">    export GIT_AUTHOR_NAME="$CORRECT_NAME"</span><br><span class="line">    export GIT_AUTHOR_EMAIL="$CORRECT_EMAIL"</span><br><span class="line">fi</span><br><span class="line">'</span> --tag-name-filter cat -- --branches --tags</span><br></pre></td></tr></table></figure></p>
<p>这个时候你直接替换相应的内容，然后执行 <code>sh change.sh</code></p>
<blockquote>
<p>这里需要注意的是每当你向Pod中添加了新的文件或者以后更新了podspec的版本都需要重新执行一遍pod update命令</p>
</blockquote>
<p>接下来就是编辑<code>podspec</code>文件了, 涉及到的字段可以到 <a href="http://guides.cocoapods.org/syntax/podspec.html#specification" target="_blank" rel="external">官方文档</a> 查阅<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Pod::Spec.new <span class="keyword">do</span> <span class="params">|s|</span></span><br><span class="line">  s.name             = <span class="string">'RoundButton'</span></span><br><span class="line">  s.version          = <span class="string">'0.1.0'</span></span><br><span class="line">  s.summary          = <span class="string">'A Custom Round Button of Button.'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This description is used to generate tags and improve search results.</span></span><br><span class="line"><span class="comment">#   * Think: What does it do? Why did you write it? What is the focus?</span></span><br><span class="line"><span class="comment">#   * Try to keep it short, snappy and to the point.</span></span><br><span class="line"><span class="comment">#   * Write the description between the DESC delimiters below.</span></span><br><span class="line"><span class="comment">#   * Finally, don't worry about the indent, CocoaPods strips it!</span></span><br><span class="line"></span><br><span class="line">  s.description      = &lt;&lt;-DESC</span><br><span class="line">创建一个带有圆角的UIButton, 并且用block封装回调</span><br><span class="line">                       DESC</span><br><span class="line"></span><br><span class="line">  s.homepage         = <span class="string">'https://gitlab.com/oheroj/RoundButton'</span></span><br><span class="line">  <span class="comment"># s.screenshots     = 'www.example.com/screenshots_1', 'www.example.com/screenshots_2'</span></span><br><span class="line">  s.license          = &#123; <span class="symbol">:type</span> =&gt; <span class="string">'MIT'</span>, <span class="symbol">:file</span> =&gt; <span class="string">'LICENSE'</span> &#125;</span><br><span class="line">  s.author           = &#123; <span class="string">'oheroj'</span> =&gt; <span class="string">'oheroj@gmail.com'</span> &#125;</span><br><span class="line">  s.source           = &#123; <span class="symbol">:git</span> =&gt; <span class="string">'https://gitlab.com/oheroj/RoundButton.git'</span>, <span class="symbol">:tag</span> =&gt; s.version.to_s &#125;</span><br><span class="line">  <span class="comment"># s.social_media_url = 'https://twitter.com/&lt;TWITTER_USERNAME&gt;'</span></span><br><span class="line"></span><br><span class="line">  s.ios.deployment_target = <span class="string">'8.0'</span></span><br><span class="line"></span><br><span class="line">  s.source_files = <span class="string">'RoundButton/Classes/**/*'</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># s.resource_bundles = &#123;</span></span><br><span class="line">  <span class="comment">#   'RoundButton' =&gt; ['RoundButton/Assets/*.png']</span></span><br><span class="line">  <span class="comment"># &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># s.public_header_files = 'Pod/Classes/**/*.h'</span></span><br><span class="line">  <span class="comment"># s.frameworks = 'UIKit', 'MapKit'</span></span><br><span class="line">  <span class="comment"># s.dependency 'AFNetworking', '~&gt; 2.3'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p>进行提交，并且打<code>tag</code></p>
<blockquote>
<p>因为podspec文件中获取Git版本控制的项目还需要tag号，所以我们要打上一个tag</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git commit -a -m &quot;podspec modif&quot;</span><br><span class="line">git push origin master</span><br><span class="line"></span><br><span class="line">git tag -m &quot;first release&quot; 0.1.0</span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure>
<h5 id="4-本地测试配置好的podsepc文件是否可用"><a href="#4-本地测试配置好的podsepc文件是否可用" class="headerlink" title="4. 本地测试配置好的podsepc文件是否可用"></a>4. 本地测试配置好的<code>podsepc</code>文件是否可用</h5><p>编辑完<code>podspec</code>文件后，需要验证一下这个文件是否可用，如果有任何WARNING或者ERROR都是不可以的，它就不能被添加到Spec Repo中，不过xcode的WARNING是可以存在的，验证需要执行一下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod lib lint</span><br></pre></td></tr></table></figure>
<p><img src="/images/pod-file06.png" alt="pod lib lint"></p>
<h6 id="创建podspec-文件-此步骤是对有现存项目的"><a href="#创建podspec-文件-此步骤是对有现存项目的" class="headerlink" title="创建podspec 文件(此步骤是对有现存项目的)"></a>创建podspec 文件(此步骤是对有现存项目的)</h6><p>如果有现成项目的话， 我们就需要给这个项目创建个<code>podspec</code>文件,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod sepc create RoundButton git@gitlab.com:oheroj/RoundButton.git</span><br></pre></td></tr></table></figure></p>
<p>执行完之后，就创建了一个podspec文件，他其中会包含很多内容，可以按照我之前介绍的进行编辑，没用的删掉。编辑完成之后使用验证命令验证一下.</p>
<h5 id="5-向私有的Spec-Repo-中提交-podsepc"><a href="#5-向私有的Spec-Repo-中提交-podsepc" class="headerlink" title="5. 向私有的Spec Repo 中提交 podsepc"></a>5. 向私有的<code>Spec Repo</code> 中提交 podsepc</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo push MySpecs RoundButton.podspec</span><br></pre></td></tr></table></figure>
<p><img src="/images/pod-file07.png" alt="pod repos push "></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod search RoundButton</span><br></pre></td></tr></table></figure>
<p><img src="/images/pod-file08.png" alt="pod search"></p>
<h5 id="6-在个人项目中的Podfile中增加刚刚制作好的Pod使用"><a href="#6-在个人项目中的Podfile中增加刚刚制作好的Pod使用" class="headerlink" title="6. 在个人项目中的Podfile中增加刚刚制作好的Pod使用"></a>6. 在个人项目中的<code>Podfile</code>中增加刚刚制作好的<code>Pod</code>使用</h5><p>在其他项目中使用的时候, 在podfile中添加如下：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">source <span class="string">'https://github.com/CocoaPods/Specs.git'</span> <span class="comment">#公有库</span></span><br><span class="line">source <span class="string">'https://gitlab.com/oheroj/spects.git'</span></span><br><span class="line"></span><br><span class="line">platform <span class="symbol">:ios</span>, <span class="string">"8.0"</span></span><br><span class="line"></span><br><span class="line">target <span class="string">'ModelPro'</span> <span class="keyword">do</span></span><br><span class="line">    pod <span class="string">'RoundButton'</span>, <span class="string">'~&gt; 0.1.0'</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>然后执行pod install 即可</p>
<h5 id="7-更新维护podspec"><a href="#7-更新维护podspec" class="headerlink" title="7. 更新维护podspec"></a>7. 更新维护<code>podspec</code></h5><h5 id="版本规范（版本tag）"><a href="#版本规范（版本tag）" class="headerlink" title="版本规范（版本tag）"></a>版本规范（版本tag）</h5><p><strong>major.minor.patch</strong></p>
<p>App主项目依赖  <code>pod &#39;AFNetworking&#39;, &#39;~&gt; 3.1.0&#39;</code></p>
<ul>
<li>修改bug和一些其他不重要修改（修改README，Format等），增加patch版本号。用户可以放心升级。</li>
<li>曾加功能并且向前兼容，增加minor版本号。用户可以考虑升级。（推荐升级）</li>
<li>不向前兼容或重大修改或重构，增加major版本号。用户应当慎重决定是否升级。</li>
<li>当major为0时，表示该库为beta版本。不是稳定版本，所以会经常修改，并很容易造成向前不兼容的情况。开发者需要认真评估major版本号。 此时发生向前不兼容的情况，开发者应当升级minor版本号。其他同上面的规范。</li>
</ul>
<h5 id="维护、增加新功能"><a href="#维护、增加新功能" class="headerlink" title="维护、增加新功能"></a>维护、增加新功能</h5><p>将源文件添加到<code>Pod/Classes</code>中， 在测试项目里<code>pod update</code>一下， 写代码验证无误之后，就可以将这个工程 <code>push</code> 到远端仓库， 并且打上新的 tag， tag 号遵从上面的版本规范来制定。</p>
<p>然后修改<code>podspec</code>上的<code>s.version</code>为我们的 tag 号。最后再次使用<code>pod lib lint</code>验证编辑好的<code>podsepc</code>文件，没有自身的WARNING或者ERROR之后，就可以再次提交到Spec Repo中了，命令跟之前是一样的</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo push MySpecs RoundButton.podspec</span><br></pre></td></tr></table></figure>
<p>之后再次到~/.cocoapods/repos/MySpecs目录下查看, eg:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── YTNSFoundation</span><br><span class="line">│   └── 0.1.0</span><br><span class="line">│       └── YTNSFoundation.podspec</span><br><span class="line">├── YTNetworking</span><br><span class="line">│   └── 1.0.12</span><br><span class="line">│       └── YTNetworking.podspec</span><br><span class="line">└── YTUIKit</span><br><span class="line">    ├── 0.1.0</span><br><span class="line">    │   └── YTUIKit.podspec</span><br><span class="line">    └── 0.1.1</span><br><span class="line">        └── YTUIKit.podspec</span><br></pre></td></tr></table></figure>
<h5 id="删除本地一个私有Spec-Repo"><a href="#删除本地一个私有Spec-Repo" class="headerlink" title="删除本地一个私有Spec Repo"></a>删除本地一个私有<code>Spec Repo</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo remove WTSpecs</span><br></pre></td></tr></table></figure>
<h5 id="删除私有Spec-Repo某一个podspec"><a href="#删除私有Spec-Repo某一个podspec" class="headerlink" title="删除私有Spec Repo某一个podspec"></a>删除私有<code>Spec Repo</code>某一个<code>podspec</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.cocoapods/repos/MySpecs</span><br><span class="line">rm -rf RoundButton</span><br><span class="line">git commit -a -m &quot;Feat: RoundButton podspec&quot;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<h5 id="8-参考文献"><a href="#8-参考文献" class="headerlink" title="8. 参考文献"></a>8. 参考文献</h5><ol>
<li><a href="http://guides.cocoapods.org/making/private-cocoapods.html" target="_blank" rel="external">Private Pods</a></li>
<li><a href="http://blog.grio.com/2014/11/creating-a-private-cocoapod.html" target="_blank" rel="external">Creating a Private CocoaPod</a></li>
<li><a href="https://objectpartners.com/2014/06/25/developing-private-in-house-libraries-with-cocoapods/" target="_blank" rel="external">Developing Private In-House Libraries with CocoaPods</a></li>
<li><a href="http://blog.wtlucky.com/blog/2015/02/26/create-private-podspec/" target="_blank" rel="external">使用Cocoapods创建私有podspec</a></li>
<li><a href="http://www.pluto-y.com/cocoapod-private-pods-and-module-manager/" target="_blank" rel="external">Cocoapods系列教程(三)——私有库管理和模块化管理</a></li>
<li><a href="http://xiongzenghuidegithub.github.io/blog/2015/12/25/frameworksan-,-shi-yong-di-san-ku/" target="_blank" rel="external">一个iOS菜菜的白话文记录</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/28/自定义xcode模板/" itemprop="url">
                  自定义xcode模板
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-28T22:52:23+08:00" content="2016-07-28">
              2016-07-28
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/28/自定义xcode模板/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/28/自定义xcode模板/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>很多时候，我们为了阅读、快速查询代码用的手段就是在写代码的时候 使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark -</span><br><span class="line">#pragma mark</span><br><span class="line">....</span><br></pre></td></tr></table></figure></p>
<p>这些来对代码进行分区块标注， 这是个很不错的开发习惯。</p>
<p>但是往往有些东西重复多了，感觉就是在浪费时间:</p>
<p>比如 在<code>ViewController</code>我们基本上都会有如下的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - life cycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - api</span><br><span class="line"></span><br><span class="line">#pragma mark - delegate</span><br><span class="line"></span><br><span class="line">#pragma mark - dataSource</span><br><span class="line"></span><br><span class="line">#pragma mark - netWork</span><br><span class="line"></span><br><span class="line">#pragma mark - event response</span><br><span class="line"></span><br><span class="line">#pragma mark - private methods</span><br><span class="line"></span><br><span class="line">#pragma mark - getter / setter</span><br></pre></td></tr></table></figure>
<p>在 <code>View</code>上我们会有如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - initial</span><br><span class="line"></span><br><span class="line">#pragma mark - add subviews (setup)</span><br><span class="line">- (void)setup &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">#pragma mark - view layouts</span><br><span class="line">- (void)layoutUI &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - public method</span><br><span class="line"></span><br><span class="line">#pragma mark - private method</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pragma mark - getter / setter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pragma mark - config test data</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>事情可以重复1遍，2遍，但是如果要重复3遍，那就必须得重构了</p>
</blockquote>
<p>所以我们有没有办法解决这个问题呢？ 答案当然是显然的。 在我们创建一个UITableViewController 的时候，你会发现.m里面会生成一些默认代码，那么 我们能否制作一份呢， 要怎么做？</p>
<h3 id="can-do-how-do"><a href="#can-do-how-do" class="headerlink" title="can do ? how do?"></a>can do ? how do?</h3><h5 id="1-这些文件到底是从哪里生成的？"><a href="#1-这些文件到底是从哪里生成的？" class="headerlink" title="1. 这些文件到底是从哪里生成的？"></a>1. 这些文件到底是从哪里生成的？</h5><p>如果做过php, 或者python的同学 应该知道<code>模板引擎</code>, 其实xcode 生成的原理也差不多，有一份模板文件，这些文件放在叫一个<code>templates</code>的文件目录下(<code>xcode7.3</code>)。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Applications/Xcode.app/Contents/Developer/Library/Xcode/Templates/</span><br></pre></td></tr></table></figure></p>
<p>我们可以切换到这个目录：<br><img src="/images/ddtemplate.png" alt="templates"></p>
<p><code>Templates</code>下的目录结构我就不再这多说了，我相信你有这种能力发现一些规律:<br><img src="/images/ddxcode.png" alt="xcode"></p>
<p>可以对比上面的两个图， 你会看到那个<code>牛头</code>的图标在上面的两张图中都有体现。</p>
<h5 id="2-那么ViewController-xctemplate-里面放的是什么？"><a href="#2-那么ViewController-xctemplate-里面放的是什么？" class="headerlink" title="2. 那么ViewController.xctemplate 里面放的是什么？"></a>2. 那么<code>ViewController.xctemplate</code> 里面放的是什么？</h5><ol>
<li>Templatelcon.png 就是一个图标， 这东西你可以随意换，就是不要把这名字给换了</li>
<li><p>Templatelcon.plist里面是一些配置的东西</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span><br><span class="line">&lt;plist version=&quot;1.0&quot;&gt;</span><br><span class="line">&lt;dict&gt;</span><br><span class="line">	&lt;key&gt;AllowedTypes&lt;/key&gt;</span><br><span class="line">	&lt;array&gt;</span><br><span class="line">		&lt;string&gt;public.objective-c-source&lt;/string&gt;</span><br><span class="line">		&lt;string&gt;public.objective-c-plus-plus-source&lt;/string&gt;</span><br><span class="line">	&lt;/array&gt;</span><br><span class="line">	&lt;key&gt;DefaultCompletionName&lt;/key&gt;</span><br><span class="line">	&lt;string&gt;File&lt;/string&gt;</span><br><span class="line">	&lt;key&gt;Description&lt;/key&gt;</span><br><span class="line">	&lt;string&gt;自定义 viewController 模板&lt;/string&gt;</span><br><span class="line">	&lt;key&gt;Kind&lt;/key&gt;</span><br><span class="line">	&lt;string&gt;Xcode.IDEKit.TextSubstitutionFileTemplateKind&lt;/string&gt;</span><br><span class="line">	&lt;key&gt;Options&lt;/key&gt;</span><br><span class="line">	&lt;array&gt;</span><br><span class="line">		&lt;dict&gt;</span><br><span class="line">			&lt;key&gt;Description&lt;/key&gt;</span><br><span class="line">			&lt;string&gt;The name of the file to create&lt;/string&gt;</span><br><span class="line">			&lt;key&gt;Identifier&lt;/key&gt;</span><br><span class="line">			&lt;string&gt;productName&lt;/string&gt;</span><br><span class="line">			&lt;key&gt;Name&lt;/key&gt;</span><br><span class="line">			&lt;string&gt;File:&lt;/string&gt;</span><br><span class="line">			&lt;key&gt;NotPersisted&lt;/key&gt;</span><br><span class="line">			&lt;true/&gt;</span><br><span class="line">			&lt;key&gt;Required&lt;/key&gt;</span><br><span class="line">			&lt;true/&gt;</span><br><span class="line">			&lt;key&gt;Type&lt;/key&gt;</span><br><span class="line">			&lt;string&gt;text&lt;/string&gt;</span><br><span class="line">		&lt;/dict&gt;</span><br><span class="line">		&lt;dict&gt;</span><br><span class="line">			&lt;key&gt;Default&lt;/key&gt;</span><br><span class="line">			&lt;string&gt;UIViewController&lt;/string&gt;</span><br><span class="line">			&lt;key&gt;Description&lt;/key&gt;</span><br><span class="line">			&lt;string&gt;What class to subclass in the new file&lt;/string&gt;</span><br><span class="line">			&lt;key&gt;FallbackHeader&lt;/key&gt;</span><br><span class="line">			&lt;string&gt;#import &amp;lt;UIKit/UIKit.h&amp;gt;&lt;/string&gt;</span><br><span class="line">			&lt;key&gt;Identifier&lt;/key&gt;</span><br><span class="line">			&lt;string&gt;cocoaSubclass&lt;/string&gt;</span><br><span class="line">			&lt;key&gt;Name&lt;/key&gt;</span><br><span class="line">			&lt;string&gt;Subclass of:&lt;/string&gt;</span><br><span class="line">			&lt;key&gt;Required&lt;/key&gt;</span><br><span class="line">			&lt;true/&gt;</span><br><span class="line">			&lt;key&gt;Type&lt;/key&gt;</span><br><span class="line">			&lt;string&gt;class&lt;/string&gt;</span><br><span class="line">			&lt;key&gt;Values&lt;/key&gt;</span><br><span class="line">			&lt;array&gt;</span><br><span class="line">				&lt;string&gt;UIViewController&lt;/string&gt;</span><br><span class="line">			&lt;/array&gt;</span><br><span class="line">		&lt;/dict&gt;</span><br><span class="line">	&lt;/array&gt;</span><br><span class="line">	&lt;key&gt;SortOrder&lt;/key&gt;</span><br><span class="line">	&lt;string&gt;4&lt;/string&gt;</span><br><span class="line">	&lt;key&gt;Summary&lt;/key&gt;</span><br><span class="line">	&lt;string&gt;自定义 viewController 模板&lt;/string&gt;</span><br><span class="line">&lt;/dict&gt;</span><br><span class="line">&lt;/plist&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>UIViewController 这文件夹的东西你可以对比 Source文件下的系统默认的</p>
</li>
</ol>
<p>在<code>__FILEBASENAME__.H</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">//  ___FILEBASENAME___.h</span><br><span class="line">//  ___PROJECTNAME___</span><br><span class="line">//</span><br><span class="line">//  Created by ___FULLUSERNAME___ on ___DATE___.</span><br><span class="line">//___COPYRIGHT___</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">___IMPORTHEADER_cocoaSubclass___</span><br><span class="line"></span><br><span class="line">@interface ___FILEBASENAME___: ___VARIABLE_cocoaSubclass___</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
<p>在 <code>__FILEBASENAME__.m</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">//  ___FILEBASENAME___.m</span><br><span class="line">//  ___PROJECTNAME___e</span><br><span class="line">//</span><br><span class="line">//  Created by ___FULLUSERNAME___ on ___DATE___.</span><br><span class="line">//___COPYRIGHT___</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &quot;___FILEBASENAME___.h&quot;</span><br><span class="line"></span><br><span class="line">@interface ___FILEBASENAME___ ()</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation ___FILEBASENAME___</span><br><span class="line"></span><br><span class="line">#pragma mark - life cycle</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad &#123;</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#pragma mark - api</span><br><span class="line"></span><br><span class="line">#pragma mark - delegate</span><br><span class="line"></span><br><span class="line">#pragma mark - dataSource</span><br><span class="line"></span><br><span class="line">#pragma mark - netWork</span><br><span class="line"></span><br><span class="line">#pragma mark - event response</span><br><span class="line"></span><br><span class="line">#pragma mark - private methods</span><br><span class="line"></span><br><span class="line">#pragma mark - getter / setter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>然后打开一个xcode项目， cmd + n</p>
<p>然后很多你想要的就有了。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/24/gitlab之gitbook自动集成/" itemprop="url">
                  gitlab之gitbook自动集成
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-24T22:21:38+08:00" content="2016-07-24">
              2016-07-24
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/24/gitlab之gitbook自动集成/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/24/gitlab之gitbook自动集成/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>最近有个任务是 想通过 <code>gitlab</code> 的 CI 来管理 API 文档，很多时候我们都可以在 gitbook 上看到有很多人写书，<br>排版使用 markdown, 个人钟爱 markdown, 在这个任务之前，鄙人没有接触过 gitlab, 接触过一段时间，感觉杠杠的，<br>很喜欢这个它的持续化集成的功能，然后还有可以免费创建私有仓库。</p>
</blockquote>
<p>今天植入主题，我们该如何在 <strong>gitlab</strong> 上持续集成我们的 <strong>gitbook</strong> 文档。</p>
<h3 id="为什么需要文档？"><a href="#为什么需要文档？" class="headerlink" title="为什么需要文档？"></a>为什么需要文档？</h3><p>个人觉得：</p>
<ol>
<li>如果是新人入职的话，有文档那很多东西就方便多了；</li>
<li>开发一个组件，写出文档，很多东西就不需要重复介绍给使用的人</li>
<li>降低沟通成本和维护成本</li>
<li>提高开发效率</li>
<li>可以把一个新技术的探研做成一份学习路线文档，这样后来人就可以减少学习的成本</li>
</ol>
<h3 id="需要的工具"><a href="#需要的工具" class="headerlink" title="需要的工具"></a>需要的工具</h3><ol>
<li><a href="https://www.sourcetreeapp.com" target="_blank" rel="external">SourceTree</a></li>
<li><a href="https://www.gitbook.com/editor/" target="_blank" rel="external">GitBookEditor</a></li>
<li><a href="https://github.com/GitbookIO/gitbook/blob/master/docs/setup.md" target="_blank" rel="external">GitBook</a></li>
</ol>
<h3 id="文档编写-markdown"><a href="#文档编写-markdown" class="headerlink" title="文档编写 markdown"></a>文档编写 <code>markdown</code></h3><p>语法可 <a href="http://www.jianshu.com/p/q81RER" target="_blank" rel="external">参考</a></p>
<h3 id="gitbook-基本使用"><a href="#gitbook-基本使用" class="headerlink" title="gitbook 基本使用"></a><code>gitbook</code> 基本使用</h3><p>使用可 <a href="http://www.chengweiyang.cn/gitbook/basic-usage/README.html" target="_blank" rel="external">参考</a></p>
<h3 id="gitlab上持续集成的步骤"><a href="#gitlab上持续集成的步骤" class="headerlink" title="gitlab上持续集成的步骤"></a><code>gitlab</code>上持续集成的步骤</h3><ol>
<li>在gitlab新建一个resposity</li>
<li>checkout到本地</li>
<li>在项目上新增一个 .gitlab-ci.yml 文件 并提交到 Gitlab</li>
</ol>
<h3 id="gitlab-的-gitlab-ci-yml文件的编写"><a href="#gitlab-的-gitlab-ci-yml文件的编写" class="headerlink" title="gitlab 的 .gitlab-ci.yml文件的编写"></a><code>gitlab</code> 的 <code>.gitlab-ci.yml</code>文件的编写</h3><ol>
<li><a href="http://docs.gitlab.com/ce/ci/yaml/README.html" target="_blank" rel="external">.gitlab-ci.yml 指南</a></li>
<li><p>文件参考书写：</p>
<pre><code>before_script:
- env
- export LC_ALL=zh_TW.UTF-8

stages:
- build

ebook:
stage: build
script:
- gitbook pdf
artifacts:
paths:
  - book.pdf
only:
- master

image: shuoshuo/gitbook-builder:latest
</code></pre></li>
</ol>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol>
<li><a href="http://www.jianshu.com/p/e650aac83f7a" target="_blank" rel="external">gitbook在私有gitlab上持续集成</a></li>
<li><p><a href="http://docs.gitlab.com/ce/ci/yaml/README.html" target="_blank" rel="external">Configuration of your builds with .gitlab-ci.yml</a></p>
</li>
<li><p><a href="http://www.jianshu.com/p/q81RER" target="_blank" rel="external">献给写作者的 Markdown 新手指南</a></p>
</li>
<li><a href="http://www.jianshu.com/p/168c0c1c7e4f" target="_blank" rel="external">敏捷开发之API管理之道</a></li>
<li><a href="http://www.jianshu.com/p/2b43151fb92e/comments/2348175" target="_blank" rel="external">GitLab-CI与GitLab-Runner</a></li>
<li><a href="https://yudachi.biz/2016/05/27/moving-to-gitlab-pages/" target="_blank" rel="external">基地转移！从 GitHub Pages 转移到 GitLab Pages</a></li>
<li><a href="https://medium.com/@shuoshuo/多人共筆且自動產生-pdf-版電子書-5a0f1053c069#.8qic6kquk" target="_blank" rel="external">多人共筆且自動產生 PDF 版電子書</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/16/iOS之cocoapods/" itemprop="url">
                  iOS之cocoapods
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2016-07-16T07:06:01+08:00" content="2016-07-16">
              2016-07-16
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/16/iOS之cocoapods/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/16/iOS之cocoapods/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>很多东西就不在此啰嗦了， 根据 <a href="http://blog.devtang.com/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/" target="_blank" rel="external">这篇博客</a> 就可以很愉快的玩上你的cocoapods了</p>
</blockquote>
<p>今天想说的是关于自己在使用上遇到的一些问题：</p>
<h3 id="1-cocoapods-重装问题"><a href="#1-cocoapods-重装问题" class="headerlink" title="1. cocoapods 重装问题"></a>1. cocoapods 重装问题</h3><h4 id="1-卸载"><a href="#1-卸载" class="headerlink" title="1. 卸载"></a>1. 卸载</h4><pre><code>sudo gem uninstall cocoapods

// 你也可以卸载指定版本的cocoapods
// sudo gem uninstall cocoapods -v 0.38

// 对于如何查看你安装的版本
// gem list
</code></pre><h4 id="2-重装"><a href="#2-重装" class="headerlink" title="2. 重装"></a>2. 重装</h4><pre><code>// 检测你安装的 ruby 的版本是否是该 cocoapods 所支持的
sudo gem update --system  
sudo gem install cocoapods
// 或者安装指定版本的
// sudo gem install cocoapods -v 1.0.0
</code></pre><h4 id="3-pod-setup"><a href="#3-pod-setup" class="headerlink" title="3. pod setup"></a>3. pod setup</h4><p>这块拎出来讲是有原因的， 主要是在执行上面的 1，2 其实很关键的就是这个 setup 这步，很多东西都依赖于这个。</p>
<p>那么这部做了什么东西？</p>
<pre><code>cd ~/.cocoapods/repos/
</code></pre><p>会有个 <code>master</code> 文件夹，那么这个文件夹的东西就是这个 <code>pod setup</code>生成的。对于这个我们在每次<code>pod install or pod update</code> 的时候，也会牵扯到这个文件夹中的内容。</p>
<pre><code>// 切刀这个 ~/.cocoapods/repos/
du -sh *

// 我这边显示的结果是
779M  master
</code></pre><p>779M， 这也是为什么 pod setup 这么慢的原因吧(所以在setup 的时候最好是能在比较稳定且快速的网络下进行， 我就因为公司的网络问题， 下了n便，结果没成功)。</p>
<p>那么如果我们就是 setup 不成功， 那么这个时候我们可以另寻其他的路：我们可以向朋友叫他们 zip 出这个包给你,然后放到这个目录下就好。</p>
<h4 id="4-可能会有的坑"><a href="#4-可能会有的坑" class="headerlink" title="4. 可能会有的坑"></a>4. 可能会有的坑</h4><h5 id="1-搜索时报错"><a href="#1-搜索时报错" class="headerlink" title="1. 搜索时报错"></a>1. 搜索时报错</h5><pre><code>pod search  AFNetworking
</code></pre><p>出现了 <code>[!] Unable to find a pod with name, author, summary, or descriptionmatching</code>AFNetworking``</p>
<p>解决方案是：</p>
<pre><code>rm ~/Library/Caches/CocoaPods/search_index.json

// 然后
pod search AFNetworking
</code></pre><h5 id="2-1-0以上的版本-记得设置-target"><a href="#2-1-0以上的版本-记得设置-target" class="headerlink" title="2. 1.0以上的版本  记得设置 target"></a>2. 1.0以上的版本  记得设置 target</h5><h5 id="3-pod-install-或者-pod-update-很慢"><a href="#3-pod-install-或者-pod-update-很慢" class="headerlink" title="3. pod install 或者 pod update 很慢"></a>3. pod install 或者 pod update 很慢</h5><pre><code>pod install --verbose --no-repo-update
pod update --verbose --no-repo-update
</code></pre><p>原因在于当执行以上两个命令的时候会升级CocoaPods的spec仓库，加一个参数可以省略这一步，然后速度就会提升不少</p>
<h4 id="5-参考"><a href="#5-参考" class="headerlink" title="5. 参考"></a>5. 参考</h4><ol>
<li><a href="http://blog.devtang.com/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/" target="_blank" rel="external">用CocoaPods做iOS程序的依赖管理</a></li>
<li><a href="https://segmentfault.com/a/1190000005011497" target="_blank" rel="external">拥抱 CocoaPods 1.0</a></li>
<li><a href="http://www.jianshu.com/p/f79589c21dc4" target="_blank" rel="external">Cocoapods安装使用以及完全卸载</a></li>
<li><a href="http://my.oschina.net/u/2559341/blog/592738#OSC_h3_10" target="_blank" rel="external">CocoaPods详解之—-使用篇 pod install/pod update更新慢的问题</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/12316547.jpeg"
               alt="oheroj" />
          <p class="site-author-name" itemprop="name">oheroj</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">16</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/OHeroJ" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">oheroj</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"oheroj"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  

  

  

</body>
</html>
